---
import { getSession } from "@auth/astro/server"

let session = await getSession(Astro.request)

if (!session) return Astro.redirect("/")
---

<p>
  Only logged in users can see this page.
</p>

<p>
  Logged in as {session?.user?.name}
</p>

<p>
  <a href="/">Home</a>
</p>
